{% extends 'base.html' %}

{% block uncontained_content %}
 
	{% include "header.html" %}
{% endblock %}

{% block content %}
{% block head %}
<style>
  #content {
    min-height: 100%;
  }
</style>

{% endblock %}


<script charset="utf-8">
  if(urlParams.get("error")){
    $.notify(urlParams.get("error"));
  }
</script>


<div class="card">
<h1 style="font-size: 4vw;"> EDIT PROFILE/SENIOR QUOTE/PICTURE/</h1>
</div>
<br>

<div class = "cardmadeline">
	<div id="edit_password"><!--class="bg-light"-->
		<form action="edit_password" method="post" id="edit_password_form">
		<label> Password </label>
		<input type="password" class="form-control" name="password" placeholder="Current Password" style="font-size: 2vw; width: 20vw; height: auto;">
		<br>
		<label> New Password </label>
		<input type="password" class="form-control" name="newpassword" placeholder="New password" style="font-size: 2vw; width: 20vw; height: auto;">
		<br>
		<br>
		<br>
		<br>
		<br>
		<input type="submit" value="change password" name="submit" class="btn btn-primary form-control" style="font-size: 2vw; width: 20vw; height: auto;"/>
		</form>
	</div>
</div>
<div class = "cardleon">
	<div id="edit_quote">
		<form action="edit_quote" method="post" id="edit_quote_form">
		<label> Password </label>
		<input type="password" class="form-control" name="password" placeholder="Current Password" style="font-size: 2vw; width: 20vw; height: auto;">
		<br>
		<label>Edit Quote</label>
		<textarea maxlength="200" class="form-control" name="quote" form="edit_quote_form" rows="3" placeholder="I am a generic student at BHS graduating in 2020." style="font-size: 2vw; width: 20vw; height: auto;"></textarea>
		<br>
		<br>

		<input type="submit" value="change quote" name="submit" class="btn btn-primary form-control" style="font-size: 2vw; width: 20vw; height: auto;"/>
		</form>
	</div>
</div>
<div class = "carda">
	<form action="edit_picture" method="post" id="edit_picture" enctype="multipart/form-data">
	<label> Password </label>
	<input type="password" class="form-control" name="password" id="password" placeholder="Current Password" style="font-size: 2vw; width: 20vw; height: auto; "/>

	<br>

	<label for="img">Select profile picture:</label>
	<input type="file" value="profilepic" name="profilepic" class="form-control" id="profilepic" accept="image/*" style="font-size: 1vw; width: 20vw; height: auto; "/>

	<img form="edit_picture" name="realpfp" src="{{url_for('static', filename='pfps/panda.png')}}" id="profilepic_display" alt="profilepic">
	<br>
	<br>
	<br>
	<br>


	<input type="submit" value="change picture" name="submit" class="btn btn-primary form-control" style="font-size: 2vw; width: 20vw; height: auto;"/>


	</form>
</div>




<div class = "card">
	<form action="edit_college" method="post" id="edit_college_form">
		<label> Password </label>
		<input type="password" class="form-control" name="password" placeholder="Current Password" style="font-size: 2vw; width: 20vw; height: auto;">
		<br>
		<label>Where I'm Going Next</label>
        <input type="text" class="form-control" name="institution" placeholder="cool university">


		<input type="submit" value="change institution" name="submit" class="btn btn-primary form-control" style="font-size: 2vw; width: 20vw; height: auto;"/>
	</form>
</div>

<script>
document.getElementById("profilepic").onchange = function() {
    if(this.files[0].size > 2097152){
       alert("File is too big!");
       this.value = "";
    };
};


let uploadCrop;
function readURL(input) {
  if (input.files && input.files[0]) {
    var reader = new FileReader();
    
    reader.onload = function(e) {
      $('#profilepic_display').attr('src', e.target.result);
      uploadCrop = $('#profilepic_display').croppie({
        enableExif: true,
        viewport: {
            width: 200,
            height: 200,
            type: 'square'
        },
        boundary: {
            width: 300,
            height: 300
        }
      });
    }
    
    reader.readAsDataURL(input.files[0]); // convert to base64 string
  }
}

$("#profilepic").change(function() {
  readURL(this);
});

$("#edit_picture").submit( function(eventObj) {
    $("<input />").attr("text", "hidden")
        .attr("name", "crop_info")
        .attr("value", JSON.stringify(uploadCrop.croppie("get")))
        .appendTo("#edit_picture");
    return true;
});


</script>



{% endblock %}
