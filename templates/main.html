{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="{{url_for('static', filename='search_bar.css')}}" type="text/css" >
<script src="{{url_for('static', filename='search_bar.js')}}" charset="utf-8"></script>
{% endblock %}

{% block content %}
<h1>main</h1>

	<div class="container">
		<div class="search-box">
			<div class="search-icon"><i class="fa fa-search search-icon"></i></div>
      <input type="text" placeholder="Search" id="search" autocomplete="off">
			<svg class="search-border" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" x="0px" y="0px" viewBox="0 0 671 111" style="enable-background:new 0 0 671 111;"
			 xml:space="preserve">
          <path class="border" d="M335.5,108.5h-280c-29.3,0-53-23.7-53-53v0c0-29.3,23.7-53,53-53h280"/>
          <path class="border" d="M335.5,108.5h280c29.3,0,53-23.7,53-53v0c0-29.3-23.7-53-53-53h-280"/>
        </svg>
			<div class="go-icon"><i class="fa fa-arrow-right"></i></div>
		</div>
    <br>
    <br>

	</div>

<div id="faces">

</div>

<script type="text/javascript">
  let pfp_path= "{{url_for('static', filename='pfps')}}";

  $.get("/getProfiles", function(data){
      let currentRow = $("<div class='row'></div>");
      let ct = 0;
      for(let i in data){
        if(ct%4 == 0 && ct != 0){
          $("#faces").append(currentRow);
          currentRow = $("<div class='row'></div>");
        }
        let currentCard = $("<div class='col-sm face-card'></div>");
        currentCard.append($(`<h2>${data[i].name}</p>`));
        currentCard.append($(`<p>bio: ${data[i].bio}</p>`));
        let link = `/sendmessages?sendto=${data[i].name}`;
        // concern: what if id has spaces in it...
        // also injections in general...
        currentCard.append($(`<img id="img_${data[i].name}" width=500px height=250px src="${pfp_path}/${data[i].name}.png"></img>`));
        currentCard.append($(`<a href="${link}">sign ${data[i].name}'s yearbook</a>`));
        $(currentRow).append(currentCard);
        ct++;
      }
      while(ct % 4 != 0){
        ct++;
        $(currentRow).append($("<div class='row'></div>"));
      }
      $("#faces").append(currentRow);
  });

function search_name(){
  let name = $("#search").val();
  if(name){
    let img_elt = document.getElementById("img_"+name);
    if(img_elt)
      img_elt.scrollIntoView();
  }
}

document.getElementById("search").addEventListener("keyup", function(event){
  if(event.keyCode=== 13){
    event.preventDefault();
    search_name();
  }
});

</script>
<br>
<br>
<br>

<footer class="page-footer font-small">
  <div class="footer-copyright text-center py-3">Â© 2020 Copyright:
    <a>Alek Westover</a>
  </div>
</footer>


<!--<h1>LET'S GET IT </h1>
	<div id = "container">
	<div id= "left">
		<h2>Search by college </h2>
		<input type="text" value="Bunker Hill" name="text" id="college"/><br>
		<input type="submit" value="submit" name="submit" id="submit"/>
	</div>

	<div id= "right">
		<h2>Search by name </h2>
		<input type="text" value="Muhammed Ali" name="text" id="name"/><br>
		<input type="submit" value="submit" name="submit" id="submit"/>
	</div>


	<div id = "center">
		<h4>GO!!!</h4>
		<div id = "picturediv">
			<p> Our school mascot </p>
			<img src="{{url_for('static', filename='dan.jpg')}}" alt="bro"/>
		</div>

	</div>

	</div>-->

{% endblock %}
